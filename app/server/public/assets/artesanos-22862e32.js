import"./modulepreload-polyfill-3cfb730f.js";import{_ as T}from"./preload-helper-101896b7.js";import{l as C}from"./viewpartials-ac66bf27.js";import{A as M}from"./alert-3bd678b2.js";import{b as v}from"./config-d2c69cb0.js";import{h as L,l as _,s as A}from"./init-b7ef0f37.js";import{s as b}from"./toast-8abe4fe9.js";async function g(t){try{const e=new URLSearchParams(t);return await(await fetch(v+`/artesanos?${e}`)).json()}catch(e){console.error("Error al buscar las artesano:",e)}}async function B(t){const e={method:"DELETE",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t)};try{return await(await fetch(v+"/artesano",e)).json()}catch(n){console.error("Error:",n)}}const I=new M;L();(async function(){let t=[{path:"partials/shared/header.html",container:"app-header"},{path:"partials/shared/menu.html",container:"app-side"}];try{await C(t),T(()=>import("./common-8d3221b9.js"),[]),console.log("Las vistas parciales se han cargado correctamente!"),w()}catch(e){console.error(e)}})();function w(){setTimeout(function(){_()},500),D()}const p=10;let i=1;async function x(){A();const t=document.getElementById("nombre").value,e=document.getElementById("correo").value;y=await g({nombre:t,correo:e});let a=document.getElementById("tablaartesano");a.innerHTML="";let l='<tr><th>N°</th><th>Nombre y Apellidos</th><th>Correo</th><th>Tipo</th><th style="text-align: center;">Acciones</th></tr>';a.innerHTML+=l;let c=1;for(let r of y){let o="<tr>";o+=`<td>${c}</td>`,o+=`<td>${r.completo}</td>`,o+=`<td>${r.correo}</td>`,o+=`<td>${r.tipousuario}</td>`,o+=`<td style="text-align: center;"><a href="/artesanos-detalle.html?id=${r.id}" data-toggle="tooltip" title="Editar" data-id="${r.id}" class="btn btn-info btn-sm"><i class="icon icon-edit2"></i></a>`,o+=`<a href="javascript:void(0);" data-toggle="tooltip" title="Eliminar" data-id="${r.id}" class="btn btn_Eliminar btn-primary btn-sm"><i class="icon icon-bin"></i></a></td>`,o+="</tr>",a.innerHTML+=o,c++}$('[data-toggle="tooltip"]').tooltip(),L()}var y=null;document.getElementById("filtrar-artesano").addEventListener("click",async function(t){H()});async function H(){const t=document.getElementById("nombre").value,e=document.getElementById("correo").value,a=await g({nombre:t,correo:e});i=1,u(a,p,i),f(a,p)}$(document).on("click",".btn_Eliminar",async function(t){I.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas eliminar el artesano?","Cancelar","Continuar",async()=>{try{t.preventDefault();let e=$(this).data("id");await B({id:e})?(b("Se eliminó los datos correctamente"),x()):b("Ocurrió un error.")}catch(e){console.error("Error al eliminar la foto de perfil:",e)}})});async function D(){const t=document.getElementById("nombre").value,e=document.getElementById("correo").value,a=await g({nombre:t,correo:e});u(a,p,i),f(a,p)}async function u(t,e,n){const a=(n-1)*e,l=Math.min(a+e,t.length),c=t.slice(a,l);let r=document.getElementById("tablaartesano");r.innerHTML="";let o='<tr><th>N°</th><th>Nombre y Apellidos</th><th>Correo</th><th>Tipo</th><th style="text-align: center;">Acciones</th></tr>';r.innerHTML+=o;let s=a+1;for(let m of c){let d="<tr>";d+=`<td>${s}</td>`,d+=`<td>${m.completo}</td>`,d+=`<td>${m.correo}</td>`,d+=`<td>${m.tipousuario}</td>`,d+=`<td style="text-align: center;"><a href="/artesanos-detalle.html?id=${m.id}" data-toggle="tooltip" title="Editar" data-id="${m.id}" class="btn btn-info btn-sm"><i class="icon icon-edit2"></i></a>`,d+=`<a href="javascript:void(0);" data-toggle="tooltip" title="Eliminar" data-id="${m.id}" class="btn btn_Eliminar btn-primary btn-sm"><i class="icon icon-bin"></i></a></td>`,d+="</tr>",r.innerHTML+=d,s++}$('[data-toggle="tooltip"]').tooltip(),N(a+1,l,t.length)}function f(t,e){const n=document.querySelector(".pagination");n.innerHTML="";const a=Math.ceil(t.length/e),l=document.createElement("li");l.classList.add("paginate_button","page-item","previous"),l.innerHTML='<a href="#" class="page-link">Anterior</a>',l.addEventListener("click",function(s){s.preventDefault(),i>1&&(i--,u(t,e,i),f(t,e))}),n.appendChild(l);const c=Math.max(1,i-2),r=Math.min(a,i+2);c>1&&(n.appendChild(h(1,t)),c>2&&n.appendChild(E()));for(let s=c;s<=r;s++)n.appendChild(h(s,t));r<a&&(r<a-1&&n.appendChild(E()),n.appendChild(h(a,t)));const o=document.createElement("li");o.classList.add("paginate_button","page-item","next"),o.innerHTML='<a href="#" class="page-link">Siguiente</a>',o.addEventListener("click",function(s){s.preventDefault(),i<a&&(i++,u(t,e,i),f(t,e))}),n.appendChild(o),k()}function h(t,e){const n=document.createElement("li");return n.classList.add("paginate_button","page-item"),n.innerHTML=`<a href="#" class="page-link">${t}</a>`,t===i&&n.classList.add("active"),n.addEventListener("click",function(a){a.preventDefault(),i=t,u(e,p,i),f(e,p)}),n}function E(){const t=document.createElement("li");return t.classList.add("paginate_button","page-item","disabled"),t.innerHTML='<a href="#" class="page-link">…</a>',t}function k(){const t=document.querySelectorAll(".pagination .page-item");t.forEach(e=>e.classList.remove("active")),t.forEach(e=>{parseInt(e.innerText)===i&&e.classList.add("active")})}function N(t,e,n){const a=document.getElementById("basicExample_info");a.textContent=`Mostrando del ${t} al ${e} de ${n} resultados`}
