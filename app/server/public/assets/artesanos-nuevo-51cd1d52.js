import"./modulepreload-polyfill-3cfb730f.js";import{l as le,_ as ce}from"./viewpartials-7a86f681.js";import{F as de}from"./uploadJorge-fc196769.js";import{A as se}from"./alert-3bd678b2.js";import{c as ue,b as E,a as H}from"./config-ef5f6dbc.js";import{h as Z,l as me,s as pe}from"./init-52a8aa54.js";import{s as u}from"./toast-8abe4fe9.js";/* empty css              */async function K(r){try{const i={method:"GET",headers:new Headers,redirect:"follow"};return await(await fetch(ue+"/dni/"+r,i)).json()}catch(t){console.log("error",t)}}async function ve(r,t){const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({artesano:r,usuario:t})};try{return await(await fetch(E+"/artesano/saveusuarioartesano/",i)).json()}catch(l){console.error("Error:",l)}}async function ge(r){try{const i={method:"GET",headers:new Headers,redirect:"follow"};return await(await fetch(E+"/artesano/"+r,i)).json()}catch(t){console.log("error",t)}}async function $e(){try{const t={method:"GET",headers:new Headers,redirect:"follow"};return await(await fetch(E+"/departamento",t)).json()}catch(r){console.log("error",r)}}async function fe(r){try{const i={method:"GET",headers:new Headers,redirect:"follow"};return await(await fetch(E+"/ubigeo-provincias/"+r,i)).json()}catch(t){console.log("error",t)}}async function be(r){try{const i={method:"GET",headers:new Headers,redirect:"follow"};return await(await fetch(E+"/ubigeo-distritos/"+r,i)).json()}catch(t){console.log("error",t)}}async function he(r){try{const i={method:"GET",headers:new Headers,redirect:"follow"};return await(await fetch(E+"/usuario/"+r,i)).json()}catch(t){console.log("error",t)}}const B=new se;Z();(async function(){let r=[{path:"partials/shared/header.html",container:"app-header"},{path:"partials/shared/menu.html",container:"app-side"}];try{await le(r),ce(()=>import("./common-8d3221b9.js"),[]),console.log("Las vistas parciales se han cargado correctamente!"),ye()}catch(t){console.error(t)}})();function ye(){setTimeout(function(){me()},500),Ee()}var S=0,M=0;let P=0,w=0,_=0;var s=null,N=null;let T=0,F=0;async function Ee(){$("#btnvalidar").on("click",async function(t){event.preventDefault();var i=document.getElementById("usuario").value,l=document.getElementById("contrasena").value,a=document.getElementById("repetirContrasena").value,g=!1;if(i.trim()===""){u("El campo usuario es obligatorio"),g=!0;return}else if(/^\w+$/.test(i))usuarioError.textContent="";else{u("El usuario solo puede contener letras, números y guiones bajos"),g=!0;return}if(l.trim()===""){u("El campo contraseña es obligatorio"),g=!0;return}else if(!/^\w+$/.test(l)){u("El contraseña solo puede contener letras, números y guiones bajos"),g=!0;return}if(a.trim()===""){u("Debe repetir la contraseña"),g=!0;return}else if(a!==l){u("Las contraseñas no coinciden"),g=!0;return}g||u("Se valido con exito")});function r(t){const l=`${window.location.origin}/artesanos-detalle.html?id=${t}`;window.location.href=l}$("#btnguardarcambio").on("click",async function(t){debugger;t.preventDefault();{let b=$("#dni").val(),e=$("#ruc").val(),n=$("#nombres").val(),d=$("#apellidos").val(),v=$("#correo").val(),p=$("#celular").val(),f=$("#lugar_nacimiento").val(),h=$("#distrito").val(),I=$("#lengua_materna").val();var i=document.getElementById("imagenFoto1"),l=document.getElementById("imagenFoto2"),a=i.src,g=l.src;let o=[],m={id:1,nombretaller:$("#nombretaller").val(),horarioatencion:$("#horarioatencion").val(),ructaller:$("#ructaller").val(),direccionfisica:$("#direccionfisica").val(),latitud:$("#latitud").val(),longitud:$("#longitud").val()};o.push(m);let x=JSON.stringify(o),q=[],J={id:1,descripcionhabilidades:$("#descripcionhabilidades").val(),tipoartesania:$("#tipoartesania").val(),ceramica:$("#ceramica").is(":checked")?1:0,piedra:$("#piedra").is(":checked")?1:0,talabarteria:$("#talabarteria").is(":checked")?1:0,otro:$("#otro").is(":checked")?1:0,desotro:$("#desotro").val()};q.push(J);let te=JSON.stringify(q),U=[];$("#listaContacto tr").each(function(){let c=$(this),y={id:c.find("td").eq(0).text(),valor:c.find("td.ocultar").text(),tipo:c.find("td").eq(2).text(),Usuario:c.find("td").eq(3).text(),Enlace:c.find("td").eq(4).text()};U.push(y)});let oe=JSON.stringify(U),z=[];$("#listaMediopago tr").each(function(){let c=$(this),y={id:c.find("td").eq(0).text(),valor:c.find("td.ocultar").eq(0).text(),Pago:c.find("td").eq(2).text(),Banco:c.find("td.ocultar").eq(1).text(),Titular:c.find("td").eq(4).text(),Corriente:c.find("td").eq(5).text(),Interbancaria:c.find("td").eq(6).text(),Boleta:c.find("td.ocultar").eq(2).text(),Factura:c.find("td.ocultar").eq(3).text(),Recibo:c.find("td.ocultar").eq(4).text(),Local:c.find("td.ocultar").eq(5).text(),Departamental:c.find("td.ocultar").eq(6).text(),Internacional:c.find("td.ocultar").eq(7).text()};z.push(y)});let ae=JSON.stringify(z),V=[];$("#listaReconocimiento tr").each(function(){let c=$(this),y={id:c.find("td").eq(0).text(),Título:c.find("td").eq(1).text(),Entidad:c.find("td").eq(2).text(),Descripcion:c.find("td").eq(3).text()};V.push(y)});let ne=JSON.stringify(V);$("#usuario").val(),$("#contrasena").val();let j=[];$("#videoList tr").each(function(){let c=$(this),y={id:c.find("td").eq(0).text(),nombre:c.find("td").eq(1).text(),src:c.find("a").attr("href")};j.push(y)});let ie=JSON.stringify(j),G=[];$("#videoList2 tr").each(function(){let c=$(this),y={id:c.find("td").eq(0).text(),nombre:c.find("td").eq(1).text(),src:c.find("a").attr("href")};G.push(y)});let re=JSON.stringify(G);B.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas guardar?","Cancelar","Continuar",async()=>{var c;try{pe();let y={id:M,usuarioid:M,usuario:b,nombre_completo:n+" "+d,clave:b,rolid:2,tipousuario:2,estado:1},C=await ve({artesanoId:S,dni:b,ruc:e,nombres:n,apellidos:d,correo:v,celular:p,lugar_nacimiento:f,ubigeo:h,lengua_materna:I,foto1:a,foto2:g,lst_taller:x,lst_especialidadtecnicas:te,lst_contactos:oe,lst_mediospago:ae,lst_reconocimientos:ne,usuario_id:M,lst_videoenlace:re,lst_videos:ie},y);C?(u("Se registro los datos correctamente"),Z(),$("#myModal").css("display","none"),r((c=C==null?void 0:C.artesano_result)==null?void 0:c.id)):u("Ocurrio un error.")}catch(y){console.error("Error al eliminar la foto de perfil:",y)}})}})}async function Ie(r){s=await ge(r),M=s.usuario_id,$("#dni").val(s.dni),$("#ruc").val(s.ruc),$("#nombres").val(s.nombres),$("#apellidos").val(s.apellidos),$("#correo").val(s.correo),$("#celular").val(s.celular),$("#lugar_nacimiento").val(s.lugar_nacimiento),await Q(),$("#region").val(s.ubigeo.substring(0,2)),await W(s.ubigeo.substring(0,2)),$("#provincia").val(s.ubigeo.substring(0,4)),await X(s.ubigeo.substring(0,4)),$("#distrito").val(s.ubigeo),$("#lengua_materna").val(s.lengua_materna),document.getElementById("imagenFoto1").src=s.foto1,document.getElementById("imagenFoto2").src=s.foto2;const t=JSON.parse(s.lst_taller);JSON.parse(t).forEach(o=>{$("#nombretaller").val(o.nombretaller),$("#horarioatencion").val(o.horarioatencion),$("#ructaller").val(o.ructaller),$("#direccionfisica").val(o.direccionfisica),$("#latitud").val(o.latitud),$("#longitud").val(o.longitud)});const l=JSON.parse(s.lst_especialidadtecnicas);JSON.parse(l).forEach(o=>{$("#descripcionhabilidades").val(o.descripcionhabilidades),$("#tipoartesania").val(o.tipoartesania),o.ceramica===1?document.getElementById("ceramica").checked=!0:document.getElementById("ceramica").checked=!1,o.piedra===1?document.getElementById("piedra").checked=!0:document.getElementById("piedra").checked=!1,o.talabarteria===1?document.getElementById("talabarteria").checked=!0:document.getElementById("talabarteria").checked=!1;var m=document.getElementById("desotro");o.otro===1?(document.getElementById("otro").checked=!0,m.disabled=!1,$("#desotro").val(o.desotro)):(document.getElementById("otro").checked=!1,m.disabled=!0)});const g=JSON.parse(s.lst_contactos);JSON.parse(g).forEach(o=>{P++;let m=`  
                  <tr>
                    <td>${P}</td>
                    <td class="ocultar">${o.valor}</td> 
                    <td>${o.tipo}</td> 
                    <td>${o.Usuario}</td> 
                    <td>${o.Enlace}</td> 
                    <td>
                        <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-Contacto">
                        <i class="icon icon-bin"></i>
                        </button> 
        
                    </td>
                </tr>

              `;document.getElementById("listaContacto").insertAdjacentHTML("beforeend",m)});const e=JSON.parse(s.lst_mediospago);JSON.parse(e).forEach(o=>{w++;let m=`   
                    <tr>
                      <td>${w}</td>
                      <td class="ocultar">${o.valor}</td> 
                      <td>${o.Pago}</td> 
                      <td class="ocultar">${o.Banco}</td> 
                      <td>${o.Titular}</td> 
                      <td>${o.Corriente}</td> 
                      <td>${o.Interbancaria}</td>  
                      <td class="ocultar">${o.Boleta}</td> 
                      <td class="ocultar">${o.Factura}</td> 
                      <td class="ocultar">${o.Recibo}</td> 
                      <td class="ocultar">${o.Local}</td> 
                      <td class="ocultar">${o.Departamental}</td> 
                      <td class="ocultar">${o.Internacional}</td> 
                      <td>
                          <button type="button" data-toggle="tooltip" title="Editar" class="btn btn-warning btn-sm btn-edit-Mediopago">
                              <i class="icon icon-pencil"></i>
                          </button>
                          <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-Mediopago">
                            <i class="icon icon-bin"></i>
                          </button> 
          
                      </td>
                </tr>

              `;document.getElementById("listaMediopago").insertAdjacentHTML("beforeend",m)});const d=JSON.parse(s.lst_reconocimientos);JSON.parse(d).forEach(o=>{_++;let m=`   
                    <tr>
                        <td>${_}</td> 
                        <td class="titulo">${o.Título}</td> 
                        <td class="entidad">${o.Entidad}</td> 
                        <td class="descripcion">${o.Descripcion}</td>  
                        <td> 

                        <button type="button" data-toggle="tooltip" title="Editar" class="btn btn-warning btn-sm btn-edit-reconocimiento">
                                    <i class="icon icon-pencil"></i>
                        </button>
                        <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-reconocimiento">
                                  <i class="icon icon-bin"></i>
                        </button> 
            
                        </td>
                    </tr>

              `;document.getElementById("listaReconocimiento").insertAdjacentHTML("beforeend",m)}),N=await he(s.usuario_id),$("#usuario").val(N.usuario),$("#contrasena").val(N.clave),$("#repetirContrasena").val(N.clave);const p=JSON.parse(s.lst_videos);JSON.parse(p).forEach(o=>{T++;let m=`
              <tr>
                  <td>${T}</td>
                  <td>${o.nombre}</td>
                  <td><a href="${o.src}" target="_blank">Video subido</a></td>
                  <td>
                      <button type="button" class="btn btn-info btn-sm btn-view-video" data-link="${o.src}">Ver</button>  
                      <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-video">
                      <i class="icon icon-bin"></i> 
                  </td>
              </tr>
              `;document.getElementById("videoList").insertAdjacentHTML("beforeend",m)});const h=JSON.parse(s.lst_videoenlace);JSON.parse(h).forEach(o=>{F++;let m=` 
              <tr>
                  <td>${F}</td>
                  <td>${o.nombre}</td>
                  <td><a href="${o.src}" target="_blank">${o.src}</a></td>
                  <td>
                      <button type="button" class="btn btn-info btn-sm btn-view-video" data-link="${o.src}">Ver</button> 
                      
                      <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-video1">
                      <i class="icon icon-bin"></i> 
                  </td>
              </tr>
              `;document.getElementById("videoList2").insertAdjacentHTML("beforeend",m)})}const L=document.getElementById("region"),O=document.getElementById("provincia"),A=document.getElementById("distrito");L.addEventListener("change",function(){var r=document.getElementById("region"),t=r.value;W(t)});O.addEventListener("change",function(){var r=document.getElementById("provincia"),t=r.value;X(t)});async function Q(){try{const r=await $e();L.innerHTML="";let t=document.createElement("option");t.value="0",t.textContent="Seleccionar",L.appendChild(t),r.forEach(i=>{let l=document.createElement("option");l.value=i.iddepartamento,l.textContent=i.departamento,L.appendChild(l)})}catch(r){console.error("Error al llenar el select:",r)}}async function W(r){try{const t=await fe(r);O.innerHTML="";let i=document.createElement("option");i.value="0",i.textContent="Seleccionar",O.appendChild(i),t.forEach(l=>{let a=document.createElement("option");a.value=l.idprovincia,a.textContent=l.provincia,O.appendChild(a)})}catch(t){console.error("Error al llenar el select:",t)}}async function X(r){try{const t=await be(r);A.innerHTML="";let i=document.createElement("option");i.value="0",i.textContent="Seleccionar",A.appendChild(i),t.forEach(l=>{let a=document.createElement("option");a.value=l.ubigeo,a.textContent=l.distrito,A.appendChild(a)})}catch(t){console.error("Error al llenar el select:",t)}}function ke(){$("#home-tab2, #home-tab3, #home-tab4, #home-tab5, #home-tab6").addClass("disabled")}$(document).ready(function(){Q(),document.getElementById("guardarMediopagoBtn").style.display="inline-block",document.getElementById("editarMediopagoBtn").style.display="none",document.getElementById("guardarreconocimientoBtn").style.display="inline-block",document.getElementById("editarreconocimientoBtn").style.display="none",S=new URLSearchParams(window.location.search).get("id");var t=document.getElementById("tituloartesano");S!=0?(t.innerText="Editar artesano",$("#btnguardarcambio").text("Actualizar"),Ie(S)):(ke(),t.innerText="Nuevo artesano"),$("#addcontactoButton").on("click",function(){let e=$("#tiporedsocial").val(),n=$("#usuarionumero").val(),d=$("#enlacecontacto").val();if(e==="0"){u("Por favor de seleccionar tipo.");return}if(n===""){u("Por favor, ingresar usuario / número.");return}if(d===""){u("Por favor, ingresar enlace de contacto.");return}const p=document.getElementById("tiporedsocial").options;let f="",h="";for(let o=0;o<p.length;o++)f=p[o].text,h=p[o].value,console.log(`Texto: ${f}, Valor: ${h}`);P++;let I=`
        <tr>
            <td>${P}</td>
            <td class="ocultar">${h}</td> 
            <td>${f}</td> 
            <td>${n}</td> 
            <td>${d}</td> 
            <td>
                <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-Contacto">
                <i class="icon icon-bin"></i>
                </button> 

            </td>
        </tr>
    `;$("#listaContacto").append(I),$("#tiporedsocial").val(0),$("#usuarionumero").val(""),$("#enlacecontacto").val("")}),$(document).on("click",".btn-delete-Contacto",function(){B.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas eliminar?","Cancelar","Continuar",async()=>{try{$(this).closest("tr").remove(),P--,$("#listaContacto tr").each(function(e,n){$(n).find("td:first").text(e+1)})}catch(e){console.error("Error al eliminar:",e)}})}),$("#guardarMediopagoBtn").on("click",function(){let e=$("#tipomediopago").val(),n=$("#nombrebanco").val(),d=$("#nombretitular").val(),v=$("#cuentacorriente").val(),p=$("#cuentainterbancaria").val(),f=$("#boleta").is(":checked")?1:0,h=$("#factura").is(":checked")?1:0,I=$("#recibohonorario").is(":checked")?1:0,o=$("#local").is(":checked")?1:0,m=$("#departamental").is(":checked")?1:0,k=$("#internacional").is(":checked")?1:0;if(e==="0"){u("Por favor de seleccionar tipo.");return}if(n===""||d===""||v===""||p===""){u("Por favor, todos los campos *.");return}let x=$("#tipomediopago").val(),q=$("#tipomediopago option:selected").text();w++;let J=`
        <tr>
            <td>${w}</td>
            <td class="ocultar">${x}</td> 
            <td>${q}</td> 
            <td class="ocultar">${n}</td> 
            <td>${d}</td> 
            <td>${v}</td> 
            <td>${p}</td> 
            <td class="ocultar">${f}</td> 
            <td class="ocultar">${h}</td> 
            <td class="ocultar">${I}</td> 
            <td class="ocultar">${o}</td> 
            <td class="ocultar">${m}</td> 
            <td class="ocultar">${k}</td> 
            <td>
                <button type="button" data-toggle="tooltip" title="Editar" class="btn btn-warning btn-sm btn-edit-Mediopago">
                    <i class="icon icon-pencil"></i>
                </button>
                <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-Mediopago">
                <i class="icon icon-bin"></i>
                </button> 

            </td>
        </tr>
    `;$("#listaMediopago").append(J),$("#tipomediopago").val(0),$("#nombrebanco").val(""),$("#nombretitular").val(""),$("#cuentacorriente").val(""),$("#cuentainterbancaria").val(""),$("#boleta").prop("checked",!1),$("#factura").prop("checked",!1),$("#recibohonorario").prop("checked",!1),$("#local").prop("checked",!1),$("#departamental").prop("checked",!1),$("#internacional").prop("checked",!1),$("#addmediopagoModal").modal("hide")});var i=0,l=document.getElementById("addmediopagoModalLabel");$("#addmediopagoModal").on("shown.bs.modal",function(){i!==1&&($("#tituloreconocimiento").val(""),$("#entidadreconoce").val(""),$("#descripcionreconocimiento").val(""),l.innerText="Nuevo medio de pago")}),$("#addmediopagoModal").on("hide.bs.modal",function(){$("#tipomediopago").val(0),$("#nombrebanco").val(""),$("#nombretitular").val(""),$("#cuentacorriente").val(""),$("#cuentainterbancaria").val(""),$("#boleta").prop("checked",!1),$("#factura").prop("checked",!1),$("#recibohonorario").prop("checked",!1),$("#local").prop("checked",!1),$("#departamental").prop("checked",!1),$("#internacional").prop("checked",!1),i=0,l.innerText="Nuevo medio de pago"}),$("#listaMediopago").on("click",".btn-edit-Mediopago",function(){a=$(this).closest("tr");let e=a.find("td:eq(1)").text();a.find("td:eq(2)").text();let n=a.find("td:eq(3)").text(),d=a.find("td:eq(4)").text(),v=a.find("td:eq(5)").text(),p=a.find("td:eq(6)").text(),f=a.find("td:eq(7)").text(),h=a.find("td:eq(8)").text(),I=a.find("td:eq(9)").text(),o=a.find("td:eq(10)").text(),m=a.find("td:eq(11)").text(),k=a.find("td:eq(12)").text();$("#tipomediopago").val(e),$("#nombrebanco").val(n),$("#nombretitular").val(d),$("#cuentacorriente").val(v),$("#cuentainterbancaria").val(p),f==1?document.getElementById("boleta").checked=!0:document.getElementById("boleta").checked=!1,h==1?document.getElementById("factura").checked=!0:document.getElementById("factura").checked=!1,I==1?document.getElementById("recibohonorario").checked=!0:document.getElementById("recibohonorario").checked=!1,o==1?document.getElementById("local").checked=!0:document.getElementById("local").checked=!1,m==1?document.getElementById("departamental").checked=!0:document.getElementById("departamental").checked=!1,k==1?document.getElementById("internacional").checked=!0:document.getElementById("internacional").checked=!1,document.getElementById("guardarMediopagoBtn").style.display="none",document.getElementById("editarMediopagoBtn").style.display="inline-block",l.innerText="Editar medio de pago",i=1,$("#addmediopagoModal").modal("show")}),$(document).on("click",".btn-delete-Mediopago",function(){B.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas eliminar?","Cancelar","Continuar",async()=>{try{$(this).closest("tr").remove(),w--,$("#listaMediopago tr").each(function(e,n){$(n).find("td:first").text(e+1)})}catch(e){console.error("Error al eliminar:",e)}})}),$("#editarMediopagoBtn").on("click",function(){let e=$("#tipomediopago").val(),n=$("#tipomediopago option:selected").text(),d=$("#nombrebanco").val(),v=$("#nombretitular").val(),p=$("#cuentacorriente").val(),f=$("#cuentainterbancaria").val(),h=$("#boleta").is(":checked")?1:0,I=$("#factura").is(":checked")?1:0,o=$("#recibohonorario").is(":checked")?1:0,m=$("#local").is(":checked")?1:0,k=$("#departamental").is(":checked")?1:0,x=$("#internacional").is(":checked")?1:0;a.find("td:eq(1)").text(e),a.find("td:eq(2)").text(n),a.find("td:eq(3)").text(d),a.find("td:eq(4)").text(v),a.find("td:eq(5)").text(p),a.find("td:eq(6)").text(f),a.find("td:eq(7)").text(h),a.find("td:eq(8)").text(I),a.find("td:eq(9)").text(o),a.find("td:eq(10)").text(m),a.find("td:eq(11)").text(k),a.find("td:eq(12)").text(x),document.getElementById("guardarMediopagoBtn").style.display="inline-block",document.getElementById("editarMediopagoBtn").style.display="none",$("#tipomediopago").val(0),$("#nombrebanco").val(""),$("#nombretitular").val(""),$("#cuentacorriente").val(""),$("#cuentainterbancaria").val(""),$("#boleta").prop("checked",!1),$("#factura").prop("checked",!1),$("#recibohonorario").prop("checked",!1),$("#local").prop("checked",!1),$("#departamental").prop("checked",!1),$("#internacional").prop("checked",!1),$("#addmediopagoModal").modal("hide"),i=0}),$("#guardarreconocimientoBtn").on("click",function(){let e=$("#tituloreconocimiento").val(),n=$("#entidadreconoce").val(),d=$("#descripcionreconocimiento").val();if(e===""||n===""||d===""){u("Por favor, todos los campos *.");return}_++;let v=`
        <tr>
            <td>${_}</td> 
            <td class="titulo">${e}</td> 
            <td class="entidad">${n}</td> 
            <td class="descripcion">${d}</td>  
            <td>
                  <button type="button" data-toggle="tooltip" title="Editar" class="btn btn-warning btn-sm btn-edit-reconocimiento">
                            <i class="icon icon-pencil"></i>
                 </button>
                <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-reconocimiento">
                      <i class="icon icon-bin"></i>
                </button> 

            </td>
        </tr>
    `;$("#listaReconocimiento").append(v),$("#tituloreconocimiento").val(""),$("#entidadreconoce").val(""),$("#descripcionreconocimiento").val(""),$("#addreconocimmientoModal").modal("hide")});let a;var g=document.getElementById("addreconocimmientoModalLabel"),b=0;$("#listaReconocimiento").on("click",".btn-edit-reconocimiento",function(){a=$(this).closest("tr");let e=a.find(".titulo").text(),n=a.find(".entidad").text(),d=a.find(".descripcion").text();$("#tituloreconocimiento").val(e),$("#entidadreconoce").val(n),$("#descripcionreconocimiento").val(d),document.getElementById("guardarreconocimientoBtn").style.display="none",document.getElementById("editarreconocimientoBtn").style.display="inline-block",$("#addreconocimmientoModal").modal("show"),g.innerText="Editar Reconocimiento",b=1}),$(document).on("click",".btn-delete-reconocimiento",function(){B.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas eliminar?","Cancelar","Continuar",async()=>{try{$(this).closest("tr").remove(),w--,$("#listaReconocimiento tr").each(function(e,n){$(n).find("td:first").text(e+1)})}catch(e){console.error("Error al eliminar:",e)}})}),$("#addreconocimmientoModal").on("shown.bs.modal",function(){if(b!==1){$("#tituloreconocimiento").val(""),$("#entidadreconoce").val(""),$("#descripcionreconocimiento").val("");var e=document.getElementById("addreconocimmientoModalLabel");e.innerText="Nuevo reconocimiento"}}),$("#addreconocimmientoModal").on("hide.bs.modal",function(){$("#tituloreconocimiento").val(""),$("#entidadreconoce").val(""),$("#descripcionreconocimiento").val(""),b=0;var e=document.getElementById("addreconocimmientoModalLabel");e.innerText="Nuevo reconocimiento"}),$("#editarreconocimientoBtn").on("click",function(){let e=$("#tituloreconocimiento").val(),n=$("#entidadreconoce").val(),d=$("#descripcionreconocimiento").val();a.find(".titulo").text(e),a.find(".entidad").text(n),a.find(".descripcion").text(d),document.getElementById("guardarreconocimientoBtn").style.display="inline-block",document.getElementById("editarreconocimientoBtn").style.display="none",$("#tituloreconocimiento").val(""),$("#entidadreconoce").val(""),$("#descripcionreconocimiento").val(""),$("#addreconocimmientoModal").modal("hide"),b=0}),$("#guardarPrincipalBtn").on("click",function(){let e=$("#principalImagePreview").attr("src"),n=$("#principalImageName").val();if($("#imageName").val(),$("#imagePreview").attr("src"),!e||!n){u("Por favor, suba una imagen.");return}$("#imagenFoto1").attr("src",e),$("#imagenFoto1Modal").modal("hide"),$("#imagenPrincipalForm")[0].reset(),$("#principalImagePreview").hide()}),$("#limpiarFoto1Btn").on("click",function(){$("#imagenFoto1").attr("src","/img/sin_imagen.jpg")}),$("#guardarPrincipal2Btn").on("click",function(){let e=$("#principalImage2Preview").attr("src"),n=$("#principalImage2Name").val();if($("#imageName").val(),$("#imagePreview").attr("src"),!e||!n){u("Por favor, suba una imagen.");return}$("#imagenFoto2").attr("src",e),$("#imagenFoto2Modal").modal("hide"),$("#imagenPrincipal2Form")[0].reset(),$("#principalImage2Preview").hide()}),$("#limpiarFoto2Btn").on("click",function(){$("#imagenFoto2").attr("src","/img/sin_imagen.jpg")}),$("#addVideoLink").on("click",function(){let e=$("#linkVideoName").val(),n=$("#videoLink").val();if(!e||!n){u("Por favor, complete todos los campos *.");return}var d=document.getElementById("videoLink").value;document.getElementById("message");var v=new RegExp("^(https?:\\/\\/)?((([a-zA-Z0-9]{1,}\\.)?[a-zA-Z0-9]{2,}\\.[a-zA-Z]{2,})|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?(\\?[;&a-zA-Z0-9@:%_\\+.~#?&//=]*)?(\\#[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?$","i");if(!v.test(d)){u("URL no válida."),$("#videoLink").val("");return}F++;let p=`
          <tr>
              <td>${F}</td>
              <td>${e}</td>
              <td><a href="${n}" target="_blank">${n}</a></td>
              <td>
                  <button type="button" class="btn btn-info btn-sm btn-view-video" data-link="${n}">Ver</button> 
                  
                  <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-video1">
                  <i class="icon icon-bin"></i> 
              </td>
          </tr>
      `;$("#videoList2").append(p),$("#linkForm")[0].reset()}),$(document).on("click",".btn-delete-video1",function(){B.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas eliminar?","Cancelar","Continuar",async()=>{try{$(this).closest("tr").remove(),contadorImagenes--,$("#videoList2 tr").each(function(e,n){$(n).find("td:first").text(e+1)})}catch(e){console.error("Error al eliminar:",e)}})}),$(document).on("click",".btn-view-video",function(){let e=$(this).data("link"),n=e;e.includes("youtube.com/watch")?n=`https://www.youtube.com/embed/${new URLSearchParams(new URL(e).search).get("v")}`:e.includes("youtu.be")&&(n=`https://www.youtube.com/embed/${e.split("/").pop()}`),$("#videoPlayer").attr("src",n),$("#videoModal").modal("show")}),$("#videoModal").on("hidden.bs.modal",function(){$("#videoPlayer").attr("src","")}),$("#uploadVideo").on("change",function(){let e=$(this).prop("files")[0];if(e){let n=(e.size/1048576).toFixed(2);if($("#fileSize").text(`${n}mb`),e.size>100*1024*1024)$("#uploadProgress").addClass("bg-danger").text("100%"),$("#uploadProgress").css("width","100%");else{let d=(e.size/104857600*100).toFixed(0);$("#uploadProgress").removeClass("bg-danger").addClass("bg-success").text(`${d}%`),$("#uploadProgress").css("width",`${d}%`)}}else $("#fileSize").text("100mb"),$("#uploadProgress").removeClass("bg-danger bg-success").text("0%"),$("#uploadProgress").css("width","0%")}),$("#cancelUpload").on("click",function(){$("#uploadVideo").val(""),$("#fileSize").text("100mb"),$("#uploadProgress").removeClass("bg-danger bg-success").text("0%"),$("#uploadProgress").css("width","0%")}),$("#registerVideo").on("click",function(){let e=$("#videoName").val(),n=$("#uploadVideo").prop("files")[0];if(!e||!n){u("Por favor, complete todos los campos *.");return}if(n.size>100*1024*1024){u("El archivo no debe pesar más de 100mb.");return}T++;var d=document.getElementById("videoPreview"),v=d.src;let p=v,f=`
          <tr>
              <td>${T}</td>
              <td>${e}</td>
              <td><a href="${p}" target="_blank">Video subido</a></td>
              <td>
                  <button type="button" class="btn btn-info btn-sm btn-view-video" data-link="${p}">Ver</button>  
                  <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-video">
                  <i class="icon icon-bin"></i> 
              </td>
          </tr>
      `;$("#videoList").append(f),$("#videoForm")[0].reset(),$("#fileSize").text("100mb"),$("#uploadProgress").removeClass("bg-danger bg-success").text("0%"),$("#uploadProgress").css("width","0%")}),$(document).on("click",".btn-delete-video",function(){B.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas eliminar?","Cancelar","Continuar",async()=>{try{$(this).closest("tr").remove(),contadorImagenes--,$("#videoList tr").each(function(e,n){$(n).find("td:first").text(e+1)})}catch(e){console.error("Error al eliminar:",e)}})})});document.addEventListener("DOMContentLoaded",()=>{R({fileInputId:"uploadPrincipalImage",progressBarId:"progressBar",statusElementId:"status",uploadUrl:E+"/artesano/fileupload",callback:we,folder:"/artesano/img/"})});document.addEventListener("DOMContentLoaded",()=>{R({fileInputId:"uploadVideo",progressBarId:"progressBar",statusElementId:"status",uploadUrl:E+"/producto/fileupload",callback:Be,folder:"/producto/video/"})});function Be(r){$("#videoPreview").attr("src",H(E)+"/"+r.path).show()}function we(r){let t=$("#uploadPrincipalImage").prop("files")[0];if(t){let i=new FileReader;i.onload=function(l){$("#principalImagePreview").attr("src",H(E)+"/"+r.path).show(),$("#principalImageName").val(t.name)},i.readAsDataURL(t)}else u("Por favor, seleccione un archivo para visualizar.")}document.addEventListener("DOMContentLoaded",()=>{R({fileInputId:"uploadPrincipal2Image",progressBarId:"progressBar2",statusElementId:"status",uploadUrl:E+"/artesano/fileupload",callback:xe,folder:"/artesano/img/"})});function xe(r){let t=$("#uploadPrincipal2Image").prop("files")[0];if(t){let i=new FileReader;i.onload=function(l){$("#principalImage2Preview").attr("src",H(E)+"/"+r.path).show(),$("#principalImage2Name").val(t.name)},i.readAsDataURL(t)}else u("Por favor, seleccione un archivo para visualizar.")}function R({fileInputId:r,progressBarId:t,statusElementId:i,uploadUrl:l,folder:a,callback:g}){const b=document.getElementById(r),e=b.name,n=document.getElementById(t),d=document.getElementById(i);b&&n&&d?new de(l,n,d,g,e,a).attachToFileInput(b):console.error("Initialization failed: One or more elements not found.")}const D=document.getElementById("dni"),Y=document.getElementById("nombres"),ee=document.getElementById("apellidos");$("#btnbuscarReniec").on("click",async function(r){const t=D.value.trim();if(t.length==8){const l=await K(t);l!=null?(Y.value=l.nombres,ee.value=l.apellidoPaterno+" "+l.apellidoMaterno):(u("El DNI no esta registrado en reniec"),$("#nombres").val(""),$("#apellidos").val(""))}else t.focus()});D.addEventListener("input",async function(){const r=D.value.trim();if(r.length==8){const i=await K(r);i!=null?(Y.value=i.nombres,ee.value=i.apellidoPaterno+" "+i.apellidoMaterno):(u("El DNI no esta registrado en reniec"),$("#nombres").val(""),$("#apellidos").val(""))}});document.getElementById("otro").addEventListener("change",function(){var r=this,t=document.getElementById("desotro");t.disabled=!r.checked,$("#desotro").val("")});
