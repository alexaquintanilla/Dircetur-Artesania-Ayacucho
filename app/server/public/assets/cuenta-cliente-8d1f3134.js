import"./modulepreload-polyfill-3cfb730f.js";import"./index-339297ac.js";import"./login-cliente-885bfb3e.js";import{g as n,b as s}from"./config-d2c69cb0.js";import{s as r}from"./toast-8abe4fe9.js";import"./preload-helper-101896b7.js";import"./init-b7ef0f37.js";import"./viewpartials-ac66bf27.js";async function c(){const a=n("id"),e=n("idCliente");console.log("LOS REALES DATOS",a,e);try{return await fetch(s+`/cliente/${e}`)}catch(o){console.error("Error al listar los datos del cliente:",o)}}async function i(a){const e=n("idCliente");a.idUsuario=n("id");const o={method:"PUT",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(a)};try{return await fetch(s+`/cliente/${e}`,o)}catch(t){console.error("Error al actualizar el cliente",t)}}async function l(a){const e=n("id"),o={method:"PUT",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(a)};try{return await fetch(s+`/v1/contrasenia-clientes/${e}`,o)}catch(t){console.error("Error al hacer la peticion",t)}}$(document).ready(function(){d(),$("#btnSaveChanges").click(async function(a){a.preventDefault(),m()}),$("#btnResetPassword").click(async function(a){a.preventDefault(),p()})});async function d(){try{console.log("Inicio");const e=await(await c()).json();console.log("DATOS CLIENTE",e),u(e)}catch(a){console.error(a)}}function u(a){$("#name").val(a.clienteData.nombres),$("#lastName").val(a.clienteData.apellidos),$("#phone").val(a.clienteData.telefono),$("#country").val(a.clienteData.pais),$("#city").val(a.clienteData.ciudad),$("#email").val(a.clienteData.correo),$("#document-type").val(a.clienteData.tipo_documento),$("#document-number").val(a.clienteData.numero_documento),$("#address").val(a.clienteData.direccion),$(".profile-img").attr("src",datosCliente.fotoPerfil||"default-image-path.jpg")}async function m(){$("#btnSaveChanges").prop("disabled",!0).text("Guardando...");const a=n("id").toString();console.log("TIPO",typeof a);const e={nombres:$("#name").val(),apellidos:$("#lastName").val(),telefono:$("#phone").val(),correo:$("#email").val(),pais:$("#country").val(),ciudad:$("#city").val(),tipo_documento:$("#document-type").val(),numero_documento:$("#document-number").val(),direccion:$("#address").val()};try{const o=await i(e),t=await o.json();if(o.status===200)console.log("La data",t.message),r(t.message);else throw new Error(t.error)}catch(o){r(o),console.error("Hubo un error actualizando el cliente",o)}finally{$("#btnSaveChanges").prop("disabled",!1).text("Guardar Cambios")}}async function p(){$("#btnResetPassword").prop("disabled",!0).text("Cambiando...");const a={clave:$("#old-password").val(),contraseniaNueva:$("#new-password").val(),contraseniaConfirmacion:$("#confirm-password").val()};try{const e=await l(a);console.log("El response",e);const o=await e.json();if(e.status===200)r(o.message);else throw new Error(o.error[0].msg)}catch(e){r(e),console.log("Hubo un error actualizando la contraseña",e)}finally{$("#btnResetPassword").prop("disabled",!1).text("Cambiar Contraseña")}}
