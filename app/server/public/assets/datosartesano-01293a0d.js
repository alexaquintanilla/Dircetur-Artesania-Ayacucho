import"./modulepreload-polyfill-3cfb730f.js";import{l as le,_ as ce}from"./viewpartials-7a86f681.js";import{F as de}from"./uploadJorge-fc196769.js";import{A as se}from"./alert-3bd678b2.js";import{c as ue,b as h,g as me,a as D}from"./config-ef5f6dbc.js";import{h as K,l as pe,s as fe}from"./init-52a8aa54.js";import{s}from"./toast-8abe4fe9.js";async function ge(n){try{const i={method:"GET",headers:new Headers,redirect:"follow"};return await(await fetch(ue+"/dni/"+n,i)).json()}catch(t){console.log("error",t)}}async function ve(n){n.artesanoId!=0&&(n.id=n.artesanoId);const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};try{return await(await fetch(h+"/artesano/save/",t)).json()}catch(i){console.error("Error:",i)}}async function $e(n){n.usuarioid!=0&&(n.id=n.usuarioid);const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};try{return await(await fetch(h+"/usuario_save/",t)).json()}catch(i){console.error("Error:",i)}}async function be(n){try{const i={method:"GET",headers:new Headers,redirect:"follow"};return await(await fetch(h+"/artesano/"+n,i)).json()}catch(t){console.log("error",t)}}async function he(){try{const t={method:"GET",headers:new Headers,redirect:"follow"};return await(await fetch(h+"/departamento",t)).json()}catch(n){console.log("error",n)}}async function ye(n){try{const i={method:"GET",headers:new Headers,redirect:"follow"};return await(await fetch(h+"/ubigeo-provincias/"+n,i)).json()}catch(t){console.log("error",t)}}async function Ee(n){try{const i={method:"GET",headers:new Headers,redirect:"follow"};return await(await fetch(h+"/ubigeo-distritos/"+n,i)).json()}catch(t){console.log("error",t)}}async function Ie(n){try{const i={method:"GET",headers:new Headers,redirect:"follow"};return await(await fetch(h+"/usuario/"+n,i)).json()}catch(t){console.log("error",t)}}const w=new se;K();(async function(){let n=[{path:"partials/shared/header.html",container:"app-header"},{path:"partials/shared/menu.html",container:"app-side"}];try{await le(n),ce(()=>import("./common-8d3221b9.js"),[]),console.log("Las vistas parciales se han cargado correctamente!"),ke()}catch(t){console.error(t)}})();function ke(){setTimeout(function(){pe()},500),Be()}let _=0,T=0;var P=0,L=0;let N=0,x=0,F=0,I=0;var u=null,C=null;async function Be(){$("#btnvalidar").on("click",async function(n){event.preventDefault();var t=document.getElementById("usuario").value,i=document.getElementById("contrasena").value,d=document.getElementById("repetirContrasena").value,a=!1;if(t.trim()===""){s("El campo usuario es obligatorio"),a=!0,I=0;return}else if(/^\w+$/.test(t))usuarioError.textContent="";else{s("El usuario solo puede contener letras, números y guiones bajos"),a=!0,I=0;return}if(i.trim()===""){s("El campo contraseña es obligatorio"),a=!0,I=0;return}else if(!/^\w+$/.test(i)){s("El contraseña solo puede contener letras, números y guiones bajos"),a=!0,I=0;return}if(d.trim()===""){s("Debe repetir la contraseña"),a=!0,I=0;return}else if(d!==i){s("Las contraseñas no coinciden"),a=!0,I=0;return}a||(s("Se valido con exito"),I=1)}),$("#btnguardarcambio").on("click",async function(n){n.preventDefault();var t=!0;if($("#form .form-control[required]").each(function(){$(this).val()===""?(t=!1,$(this).css("border-color","red")):$(this).css("border-color","")}),t)if(I=="0"){s("validar usuario de la ficha - información personal.");return}else{let y=$("#dni").val(),e=$("#ruc").val(),r=$("#nombres").val(),c=$("#apellidos").val(),f=$("#correo").val(),p=$("#celular").val(),g=$("#lugar_nacimiento").val(),v=$("#distrito").val(),E=$("#lengua_materna").val();var i=document.getElementById("imagenFoto1"),d=document.getElementById("imagenFoto2"),a=i.src,k=d.src;let o=[],m={id:1,nombretaller:$("#nombretaller").val(),horarioatencion:$("#horarioatencion").val(),ructaller:$("#ructaller").val(),direccionfisica:$("#direccionfisica").val(),latitud:$("#latitud").val(),longitud:$("#longitud").val()};o.push(m);let q=JSON.stringify(o),S=[],J={id:1,descripcionhabilidades:$("#descripcionhabilidades").val(),tipoartesania:$("#tipoartesania").val(),ceramica:$("#ceramica").is(":checked")?1:0,piedra:$("#piedra").is(":checked")?1:0,talabarteria:$("#talabarteria").is(":checked")?1:0,otro:$("#otro").is(":checked")?1:0,desotro:$("#desotro").val()};S.push(J);let Y=JSON.stringify(S),R=[];$("#listaContacto tr").each(function(){let l=$(this),b={id:l.find("td").eq(0).text(),valor:l.find("td.ocultar").text(),tipo:l.find("td").eq(2).text(),Usuario:l.find("td").eq(3).text(),Enlace:l.find("td").eq(4).text()};R.push(b)});let ee=JSON.stringify(R),U=[];$("#listaMediopago tr").each(function(){let l=$(this),b={id:l.find("td").eq(0).text(),valor:l.find("td.ocultar").eq(0).text(),Pago:l.find("td").eq(2).text(),Banco:l.find("td.ocultar").eq(1).text(),Titular:l.find("td").eq(4).text(),Corriente:l.find("td").eq(5).text(),Interbancaria:l.find("td").eq(6).text(),Boleta:l.find("td.ocultar").eq(2).text(),Factura:l.find("td.ocultar").eq(3).text(),Recibo:l.find("td.ocultar").eq(4).text(),Local:l.find("td.ocultar").eq(5).text(),Departamental:l.find("td.ocultar").eq(6).text(),Internacional:l.find("td.ocultar").eq(7).text()};U.push(b)});let te=JSON.stringify(U),z=[];$("#listaReconocimiento tr").each(function(){let l=$(this),b={id:l.find("td").eq(0).text(),Título:l.find("td").eq(1).text(),Entidad:l.find("td").eq(2).text(),Descripcion:l.find("td").eq(3).text()};z.push(b)});let oe=JSON.stringify(z),ae=$("#usuario").val(),ne=$("#contrasena").val(),j=[];$("#videoList tr").each(function(){let l=$(this),b={id:l.find("td").eq(0).text(),nombre:l.find("td").eq(1).text(),src:l.find("a").attr("href")};j.push(b)});let ie=JSON.stringify(j),V=[];$("#videoList2 tr").each(function(){let l=$(this),b={id:l.find("td").eq(0).text(),nombre:l.find("td").eq(1).text(),src:l.find("a").attr("href")};V.push(b)});let re=JSON.stringify(V);w.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas guardar?","Cancelar","Continuar",async()=>{try{fe();let l=await $e({usuarioid:L,usuario:ae,nombre_completo:r+" "+c,clave:ne,rolid:2,tipousuario:2,estado:1});if(l){s("Se actualizo los datos correctamente"),L=l.id;let b=await ve({artesanoId:P,dni:y,ruc:e,nombres:r,apellidos:c,correo:f,celular:p,lugar_nacimiento:g,ubigeo:v,lengua_materna:E,foto1:a,foto2:k,lst_taller:q,lst_especialidadtecnicas:Y,lst_contactos:ee,lst_mediospago:te,lst_reconocimientos:oe,usuario_id:L,lst_videoenlace:re,lst_videos:ie});if(b){if(s("Se actualizo los datos correctamente"),P==0){const G=new URL(window.location.href);G.searchParams.set("id",b.id),window.history.pushState({},"",G),P=b.id}K(),$("#myModal").css("display","none")}else s("Ocurrio un error.")}else s("Ocurrio un error.")}catch(l){console.error("Error al eliminar la foto de perfil:",l)}})}else{s("Por favor, ingresa el DNI y todos los campos *."),document.getElementById("dni").focus();return}})}async function we(n){u=await be(n),L=u.usuario_id,$("#dni").val(u.dni),$("#ruc").val(u.ruc),$("#nombres").val(u.nombres),$("#apellidos").val(u.apellidos),$("#correo").val(u.correo),$("#celular").val(u.celular),$("#lugar_nacimiento").val(u.lugar_nacimiento),await Q(),$("#region").val(u.ubigeo.substring(0,2)),await W(u.ubigeo.substring(0,2)),$("#provincia").val(u.ubigeo.substring(0,4)),await X(u.ubigeo.substring(0,4)),$("#distrito").val(u.ubigeo),$("#lengua_materna").val(u.lengua_materna),document.getElementById("imagenFoto1").src=u.foto1,document.getElementById("imagenFoto2").src=u.foto2;const t=JSON.parse(u.lst_taller);JSON.parse(t).forEach(o=>{$("#nombretaller").val(o.nombretaller),$("#horarioatencion").val(o.horarioatencion),$("#ructaller").val(o.ructaller),$("#direccionfisica").val(o.direccionfisica),$("#latitud").val(o.latitud),$("#longitud").val(o.longitud)});const d=JSON.parse(u.lst_especialidadtecnicas);JSON.parse(d).forEach(o=>{$("#descripcionhabilidades").val(o.descripcionhabilidades),$("#tipoartesania").val(o.tipoartesania),o.ceramica===1?document.getElementById("ceramica").checked=!0:document.getElementById("ceramica").checked=!1,o.piedra===1?document.getElementById("piedra").checked=!0:document.getElementById("piedra").checked=!1,o.talabarteria===1?document.getElementById("talabarteria").checked=!0:document.getElementById("talabarteria").checked=!1;var m=document.getElementById("desotro");o.otro===1?(document.getElementById("otro").checked=!0,m.disabled=!1,$("#desotro").val(o.desotro)):(document.getElementById("otro").checked=!1,m.disabled=!0)});const k=JSON.parse(u.lst_contactos);JSON.parse(k).forEach(o=>{N++;let m=`  
                  <tr>
                    <td>${N}</td>
                    <td class="ocultar">${o.valor}</td> 
                    <td>${o.tipo}</td> 
                    <td>${o.Usuario}</td> 
                    <td>${o.Enlace}</td> 
                    <td>
                        <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-Contacto">
                        <i class="icon icon-bin"></i>
                        </button> 
        
                    </td>
                </tr>

              `;document.getElementById("listaContacto").insertAdjacentHTML("beforeend",m)});const e=JSON.parse(u.lst_mediospago);JSON.parse(e).forEach(o=>{x++;let m=`   
                    <tr>
                      <td>${x}</td>
                      <td class="ocultar">${o.valor}</td> 
                      <td>${o.Pago}</td> 
                      <td class="ocultar">${o.Banco}</td> 
                      <td>${o.Titular}</td> 
                      <td>${o.Corriente}</td> 
                      <td>${o.Interbancaria}</td>  
                      <td class="ocultar">${o.Boleta}</td> 
                      <td class="ocultar">${o.Factura}</td> 
                      <td class="ocultar">${o.Recibo}</td> 
                      <td class="ocultar">${o.Local}</td> 
                      <td class="ocultar">${o.Departamental}</td> 
                      <td class="ocultar">${o.Internacional}</td> 
                      <td>
                          <button type="button" data-toggle="tooltip" title="Editar" class="btn btn-warning btn-sm btn-edit-Mediopago">
                              <i class="icon icon-pencil"></i>
                          </button>
                          <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-Mediopago">
                            <i class="icon icon-bin"></i>
                          </button> 
          
                      </td>
                </tr>

              `;document.getElementById("listaMediopago").insertAdjacentHTML("beforeend",m)});const c=JSON.parse(u.lst_reconocimientos);JSON.parse(c).forEach(o=>{F++;let m=`   
                    <tr>
                        <td>${F}</td> 
                        <td class="titulo">${o.Título}</td> 
                        <td class="entidad">${o.Entidad}</td> 
                        <td class="descripcion">${o.Descripcion}</td>  
                        <td> 

                        <button type="button" data-toggle="tooltip" title="Editar" class="btn btn-warning btn-sm btn-edit-reconocimiento">
                                    <i class="icon icon-pencil"></i>
                        </button>
                        <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-reconocimiento">
                                  <i class="icon icon-bin"></i>
                        </button> 
            
                        </td>
                    </tr>

              `;document.getElementById("listaReconocimiento").insertAdjacentHTML("beforeend",m)}),C=await Ie(u.usuario_id),$("#usuario").val(C.usuario),$("#contrasena").val(C.clave),$("#repetirContrasena").val(C.clave);const p=JSON.parse(u.lst_videos);JSON.parse(p).forEach(o=>{_++;let m=`
              <tr>
                  <td>${_}</td>
                  <td>${o.nombre}</td>
                  <td><a href="${o.src}" target="_blank">Video subido</a></td>
                  <td>
                      <button type="button" class="btn btn-info btn-sm btn-view-video" data-link="${o.src}">Ver</button>  
                      <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-video">
                      <i class="icon icon-bin"></i> 
                  </td>
              </tr>
              `;document.getElementById("videoList").insertAdjacentHTML("beforeend",m)});const v=JSON.parse(u.lst_videoenlace);JSON.parse(v).forEach(o=>{T++;let m=` 
              <tr>
                  <td>${T}</td>
                  <td>${o.nombre}</td>
                  <td><a href="${o.src}" target="_blank">${o.src}</a></td>
                  <td>
                      <button type="button" class="btn btn-info btn-sm btn-view-video" data-link="${o.src}">Ver</button> 
                      
                      <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-video1">
                      <i class="icon icon-bin"></i> 
                  </td>
              </tr>
              `;document.getElementById("videoList2").insertAdjacentHTML("beforeend",m)})}const M=document.getElementById("region"),O=document.getElementById("provincia"),A=document.getElementById("distrito");M.addEventListener("change",function(){var n=document.getElementById("region"),t=n.value;W(t)});O.addEventListener("change",function(){var n=document.getElementById("provincia"),t=n.value;X(t)});async function Q(){try{const n=await he();M.innerHTML="";let t=document.createElement("option");t.value="0",t.textContent="Seleccionar",M.appendChild(t),n.forEach(i=>{let d=document.createElement("option");d.value=i.iddepartamento,d.textContent=i.departamento,M.appendChild(d)})}catch(n){console.error("Error al llenar el select:",n)}}async function W(n){try{const t=await ye(n);O.innerHTML="";let i=document.createElement("option");i.value="0",i.textContent="Seleccionar",O.appendChild(i),t.forEach(d=>{let a=document.createElement("option");a.value=d.idprovincia,a.textContent=d.provincia,O.appendChild(a)})}catch(t){console.error("Error al llenar el select:",t)}}async function X(n){try{const t=await Ee(n);A.innerHTML="";let i=document.createElement("option");i.value="0",i.textContent="Seleccionar",A.appendChild(i),t.forEach(d=>{let a=document.createElement("option");a.value=d.ubigeo,a.textContent=d.distrito,A.appendChild(a)})}catch(t){console.error("Error al llenar el select:",t)}}$(document).ready(function(){Q(),document.getElementById("guardarMediopagoBtn").style.display="inline-block",document.getElementById("editarMediopagoBtn").style.display="none",document.getElementById("guardarreconocimientoBtn").style.display="inline-block",document.getElementById("editarreconocimientoBtn").style.display="none",P=me("session").usuarios.datos[0].id;var t=document.getElementById("tituloartesano");P!=0?(t.innerText="Datos Artesano",we(P)):t.innerText="Nuevo artesano",$("#addcontactoButton").on("click",function(){let e=$("#tiporedsocial").val(),r=$("#usuarionumero").val(),c=$("#enlacecontacto").val();if(e==="0"){s("Por favor de seleccionar tipo.");return}if(r===""){s("Por favor, ingresar usuario / número.");return}if(c===""){s("Por favor, ingresar enlace de contacto.");return}const p=document.getElementById("tiporedsocial").options;let g="",v="";for(let o=0;o<p.length;o++)g=p[o].text,v=p[o].value,console.log(`Texto: ${g}, Valor: ${v}`);N++;let E=`
        <tr>
            <td>${N}</td>
            <td class="ocultar">${v}</td> 
            <td>${g}</td> 
            <td>${r}</td> 
            <td>${c}</td> 
            <td>
                <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-Contacto">
                <i class="icon icon-bin"></i>
                </button> 

            </td>
        </tr>
    `;$("#listaContacto").append(E),$("#tiporedsocial").val(0),$("#usuarionumero").val(""),$("#enlacecontacto").val("")}),$(document).on("click",".btn-delete-Contacto",function(){w.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas eliminar?","Cancelar","Continuar",async()=>{try{$(this).closest("tr").remove(),N--,$("#listaContacto tr").each(function(e,r){$(r).find("td:first").text(e+1)})}catch(e){console.error("Error al eliminar:",e)}})}),$("#guardarMediopagoBtn").on("click",function(){let e=$("#tipomediopago").val(),r=$("#nombrebanco").val(),c=$("#nombretitular").val(),f=$("#cuentacorriente").val(),p=$("#cuentainterbancaria").val(),g=$("#boleta").is(":checked")?1:0,v=$("#factura").is(":checked")?1:0,E=$("#recibohonorario").is(":checked")?1:0,o=$("#local").is(":checked")?1:0,m=$("#departamental").is(":checked")?1:0,B=$("#internacional").is(":checked")?1:0;if(e==="0"){s("Por favor de seleccionar tipo.");return}if(r===""||c===""||f===""||p===""){s("Por favor, todos los campos *.");return}let q=$("#tipomediopago").val(),S=$("#tipomediopago option:selected").text();x++;let J=`
        <tr>
            <td>${x}</td>
            <td class="ocultar">${q}</td> 
            <td>${S}</td> 
            <td class="ocultar">${r}</td> 
            <td>${c}</td> 
            <td>${f}</td> 
            <td>${p}</td> 
            <td class="ocultar">${g}</td> 
            <td class="ocultar">${v}</td> 
            <td class="ocultar">${E}</td> 
            <td class="ocultar">${o}</td> 
            <td class="ocultar">${m}</td> 
            <td class="ocultar">${B}</td> 
            <td>
                <button type="button" data-toggle="tooltip" title="Editar" class="btn btn-warning btn-sm btn-edit-Mediopago">
                    <i class="icon icon-pencil"></i>
                </button>
                <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-Mediopago">
                <i class="icon icon-bin"></i>
                </button> 

            </td>
        </tr>
    `;$("#listaMediopago").append(J),$("#tipomediopago").val(0),$("#nombrebanco").val(""),$("#nombretitular").val(""),$("#cuentacorriente").val(""),$("#cuentainterbancaria").val(""),$("#boleta").prop("checked",!1),$("#factura").prop("checked",!1),$("#recibohonorario").prop("checked",!1),$("#local").prop("checked",!1),$("#departamental").prop("checked",!1),$("#internacional").prop("checked",!1),$("#addmediopagoModal").modal("hide")});var i=0,d=document.getElementById("addmediopagoModalLabel");$("#addmediopagoModal").on("shown.bs.modal",function(){i!==1&&($("#tituloreconocimiento").val(""),$("#entidadreconoce").val(""),$("#descripcionreconocimiento").val(""),d.innerText="Nuevo medio de pago")}),$("#addmediopagoModal").on("hide.bs.modal",function(){$("#tipomediopago").val(0),$("#nombrebanco").val(""),$("#nombretitular").val(""),$("#cuentacorriente").val(""),$("#cuentainterbancaria").val(""),$("#boleta").prop("checked",!1),$("#factura").prop("checked",!1),$("#recibohonorario").prop("checked",!1),$("#local").prop("checked",!1),$("#departamental").prop("checked",!1),$("#internacional").prop("checked",!1),i=0,d.innerText="Nuevo medio de pago"}),$("#listaMediopago").on("click",".btn-edit-Mediopago",function(){a=$(this).closest("tr");let e=a.find("td:eq(1)").text();a.find("td:eq(2)").text();let r=a.find("td:eq(3)").text(),c=a.find("td:eq(4)").text(),f=a.find("td:eq(5)").text(),p=a.find("td:eq(6)").text(),g=a.find("td:eq(7)").text(),v=a.find("td:eq(8)").text(),E=a.find("td:eq(9)").text(),o=a.find("td:eq(10)").text(),m=a.find("td:eq(11)").text(),B=a.find("td:eq(12)").text();$("#tipomediopago").val(e),$("#nombrebanco").val(r),$("#nombretitular").val(c),$("#cuentacorriente").val(f),$("#cuentainterbancaria").val(p),g==1?document.getElementById("boleta").checked=!0:document.getElementById("boleta").checked=!1,v==1?document.getElementById("factura").checked=!0:document.getElementById("factura").checked=!1,E==1?document.getElementById("recibohonorario").checked=!0:document.getElementById("recibohonorario").checked=!1,o==1?document.getElementById("local").checked=!0:document.getElementById("local").checked=!1,m==1?document.getElementById("departamental").checked=!0:document.getElementById("departamental").checked=!1,B==1?document.getElementById("internacional").checked=!0:document.getElementById("internacional").checked=!1,document.getElementById("guardarMediopagoBtn").style.display="none",document.getElementById("editarMediopagoBtn").style.display="inline-block",d.innerText="Editar medio de pago",i=1,$("#addmediopagoModal").modal("show")}),$(document).on("click",".btn-delete-Mediopago",function(){w.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas eliminar?","Cancelar","Continuar",async()=>{try{$(this).closest("tr").remove(),x--,$("#listaMediopago tr").each(function(e,r){$(r).find("td:first").text(e+1)})}catch(e){console.error("Error al eliminar:",e)}})}),$("#editarMediopagoBtn").on("click",function(){let e=$("#tipomediopago").val(),r=$("#tipomediopago option:selected").text(),c=$("#nombrebanco").val(),f=$("#nombretitular").val(),p=$("#cuentacorriente").val(),g=$("#cuentainterbancaria").val(),v=$("#boleta").is(":checked")?1:0,E=$("#factura").is(":checked")?1:0,o=$("#recibohonorario").is(":checked")?1:0,m=$("#local").is(":checked")?1:0,B=$("#departamental").is(":checked")?1:0,q=$("#internacional").is(":checked")?1:0;a.find("td:eq(1)").text(e),a.find("td:eq(2)").text(r),a.find("td:eq(3)").text(c),a.find("td:eq(4)").text(f),a.find("td:eq(5)").text(p),a.find("td:eq(6)").text(g),a.find("td:eq(7)").text(v),a.find("td:eq(8)").text(E),a.find("td:eq(9)").text(o),a.find("td:eq(10)").text(m),a.find("td:eq(11)").text(B),a.find("td:eq(12)").text(q),document.getElementById("guardarMediopagoBtn").style.display="inline-block",document.getElementById("editarMediopagoBtn").style.display="none",$("#tipomediopago").val(0),$("#nombrebanco").val(""),$("#nombretitular").val(""),$("#cuentacorriente").val(""),$("#cuentainterbancaria").val(""),$("#boleta").prop("checked",!1),$("#factura").prop("checked",!1),$("#recibohonorario").prop("checked",!1),$("#local").prop("checked",!1),$("#departamental").prop("checked",!1),$("#internacional").prop("checked",!1),$("#addmediopagoModal").modal("hide"),i=0}),$("#guardarreconocimientoBtn").on("click",function(){let e=$("#tituloreconocimiento").val(),r=$("#entidadreconoce").val(),c=$("#descripcionreconocimiento").val();if(e===""||r===""||c===""){s("Por favor, todos los campos *.");return}F++;let f=`
        <tr>
            <td>${F}</td> 
            <td class="titulo">${e}</td> 
            <td class="entidad">${r}</td> 
            <td class="descripcion">${c}</td>  
            <td>
                  <button type="button" data-toggle="tooltip" title="Editar" class="btn btn-warning btn-sm btn-edit-reconocimiento">
                            <i class="icon icon-pencil"></i>
                 </button>
                <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-reconocimiento">
                      <i class="icon icon-bin"></i>
                </button> 

            </td>
        </tr>
    `;$("#listaReconocimiento").append(f),$("#tituloreconocimiento").val(""),$("#entidadreconoce").val(""),$("#descripcionreconocimiento").val(""),$("#addreconocimmientoModal").modal("hide")});let a;var k=document.getElementById("addreconocimmientoModalLabel"),y=0;$("#listaReconocimiento").on("click",".btn-edit-reconocimiento",function(){a=$(this).closest("tr");let e=a.find(".titulo").text(),r=a.find(".entidad").text(),c=a.find(".descripcion").text();$("#tituloreconocimiento").val(e),$("#entidadreconoce").val(r),$("#descripcionreconocimiento").val(c),document.getElementById("guardarreconocimientoBtn").style.display="none",document.getElementById("editarreconocimientoBtn").style.display="inline-block",$("#addreconocimmientoModal").modal("show"),k.innerText="Editar Reconocimiento",y=1}),$(document).on("click",".btn-delete-reconocimiento",function(){w.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas eliminar?","Cancelar","Continuar",async()=>{try{$(this).closest("tr").remove(),x--,$("#listaReconocimiento tr").each(function(e,r){$(r).find("td:first").text(e+1)})}catch(e){console.error("Error al eliminar:",e)}})}),$("#addreconocimmientoModal").on("shown.bs.modal",function(){if(y!==1){$("#tituloreconocimiento").val(""),$("#entidadreconoce").val(""),$("#descripcionreconocimiento").val("");var e=document.getElementById("addreconocimmientoModalLabel");e.innerText="Nuevo reconocimiento"}}),$("#addreconocimmientoModal").on("hide.bs.modal",function(){$("#tituloreconocimiento").val(""),$("#entidadreconoce").val(""),$("#descripcionreconocimiento").val(""),y=0;var e=document.getElementById("addreconocimmientoModalLabel");e.innerText="Nuevo reconocimiento"}),$("#editarreconocimientoBtn").on("click",function(){let e=$("#tituloreconocimiento").val(),r=$("#entidadreconoce").val(),c=$("#descripcionreconocimiento").val();a.find(".titulo").text(e),a.find(".entidad").text(r),a.find(".descripcion").text(c),document.getElementById("guardarreconocimientoBtn").style.display="inline-block",document.getElementById("editarreconocimientoBtn").style.display="none",$("#tituloreconocimiento").val(""),$("#entidadreconoce").val(""),$("#descripcionreconocimiento").val(""),$("#addreconocimmientoModal").modal("hide"),y=0}),$("#guardarPrincipalBtn").on("click",function(){let e=$("#principalImagePreview").attr("src"),r=$("#principalImageName").val();if($("#imageName").val(),$("#imagePreview").attr("src"),!e||!r){s("Por favor, suba una imagen.");return}$("#imagenFoto1").attr("src",e),$("#imagenFoto1Modal").modal("hide"),$("#imagenPrincipalForm")[0].reset(),$("#principalImagePreview").hide()}),$("#limpiarFoto1Btn").on("click",function(){$("#imagenFoto1").attr("src","/img/sin_imagen.jpg")}),$("#guardarPrincipal2Btn").on("click",function(){let e=$("#principalImage2Preview").attr("src"),r=$("#principalImage2Name").val();if($("#imageName").val(),$("#imagePreview").attr("src"),!e||!r){s("Por favor, suba una imagen.");return}$("#imagenFoto2").attr("src",e),$("#imagenFoto2Modal").modal("hide"),$("#imagenPrincipal2Form")[0].reset(),$("#principalImage2Preview").hide()}),$("#limpiarFoto2Btn").on("click",function(){$("#imagenFoto2").attr("src","/img/sin_imagen.jpg")}),$("#addVideoLink").on("click",function(){let e=$("#linkVideoName").val(),r=$("#videoLink").val();if(!e||!r){s("Por favor, complete todos los campos *.");return}var c=document.getElementById("videoLink").value;document.getElementById("message");var f=new RegExp("^(https?:\\/\\/)?((([a-zA-Z0-9]{1,}\\.)?[a-zA-Z0-9]{2,}\\.[a-zA-Z]{2,})|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?(\\?[;&a-zA-Z0-9@:%_\\+.~#?&//=]*)?(\\#[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?$","i");if(!f.test(c)){s("URL no válida."),$("#videoLink").val("");return}T++;let p=`
          <tr>
              <td>${T}</td>
              <td>${e}</td>
              <td><a href="${r}" target="_blank">${r}</a></td>
              <td>
                  <button type="button" class="btn btn-info btn-sm btn-view-video" data-link="${r}">Ver</button> 
                  
                  <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-video1">
                  <i class="icon icon-bin"></i> 
              </td>
          </tr>
      `;$("#videoList2").append(p),$("#linkForm")[0].reset()}),$(document).on("click",".btn-delete-video1",function(){w.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas eliminar?","Cancelar","Continuar",async()=>{try{$(this).closest("tr").remove(),contadorImagenes--,$("#videoList2 tr").each(function(e,r){$(r).find("td:first").text(e+1)})}catch(e){console.error("Error al eliminar:",e)}})}),$(document).on("click",".btn-view-video",function(){let e=$(this).data("link"),r=e;e.includes("youtube.com/watch")?r=`https://www.youtube.com/embed/${new URLSearchParams(new URL(e).search).get("v")}`:e.includes("youtu.be")&&(r=`https://www.youtube.com/embed/${e.split("/").pop()}`),$("#videoPlayer").attr("src",r),$("#videoModal").modal("show")}),$("#videoModal").on("hidden.bs.modal",function(){$("#videoPlayer").attr("src","")}),$("#uploadVideo").on("change",function(){let e=$(this).prop("files")[0];if(e){let r=(e.size/1048576).toFixed(2);if($("#fileSize").text(`${r}mb`),e.size>100*1024*1024)$("#uploadProgress").addClass("bg-danger").text("100%"),$("#uploadProgress").css("width","100%");else{let c=(e.size/104857600*100).toFixed(0);$("#uploadProgress").removeClass("bg-danger").addClass("bg-success").text(`${c}%`),$("#uploadProgress").css("width",`${c}%`)}}else $("#fileSize").text("100mb"),$("#uploadProgress").removeClass("bg-danger bg-success").text("0%"),$("#uploadProgress").css("width","0%")}),$("#cancelUpload").on("click",function(){$("#uploadVideo").val(""),$("#fileSize").text("100mb"),$("#uploadProgress").removeClass("bg-danger bg-success").text("0%"),$("#uploadProgress").css("width","0%")}),$("#registerVideo").on("click",function(){let e=$("#videoName").val(),r=$("#uploadVideo").prop("files")[0];if(!e||!r){s("Por favor, complete todos los campos *.");return}if(r.size>100*1024*1024){s("El archivo no debe pesar más de 100mb.");return}_++;var c=document.getElementById("videoPreview"),f=c.src;let p=f,g=`
          <tr>
              <td>${_}</td>
              <td>${e}</td>
              <td><a href="${p}" target="_blank">Video subido</a></td>
              <td>
                  <button type="button" class="btn btn-info btn-sm btn-view-video" data-link="${p}">Ver</button>  
                  <button type="button" data-toggle="tooltip"  title="Eliminar" class="btn btn-primary btn-sm btn-delete-video">
                  <i class="icon icon-bin"></i> 
              </td>
          </tr>
      `;$("#videoList").append(g),$("#videoForm")[0].reset(),$("#fileSize").text("100mb"),$("#uploadProgress").removeClass("bg-danger bg-success").text("0%"),$("#uploadProgress").css("width","0%")}),$(document).on("click",".btn-delete-video",function(){w.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas eliminar?","Cancelar","Continuar",async()=>{try{$(this).closest("tr").remove(),contadorImagenes--,$("#videoList tr").each(function(e,r){$(r).find("td:first").text(e+1)})}catch(e){console.error("Error al eliminar:",e)}})})});document.addEventListener("DOMContentLoaded",()=>{H({fileInputId:"uploadPrincipalImage",progressBarId:"progressBar",statusElementId:"status",uploadUrl:h+"/artesano/fileupload",callback:xe,folder:"/artesano/img/"})});function xe(n){let t=$("#uploadPrincipalImage").prop("files")[0];if(t){let i=new FileReader;i.onload=function(d){$("#principalImagePreview").attr("src",D(h)+"/"+n.path).show(),$("#principalImageName").val(t.name)},i.readAsDataURL(t),s("registro correcto.")}else s("Por favor, seleccione un archivo para visualizar.")}document.addEventListener("DOMContentLoaded",()=>{H({fileInputId:"uploadPrincipal2Image",progressBarId:"progressBar2",statusElementId:"status",uploadUrl:h+"/artesano/fileupload",callback:Pe,folder:"/artesano/img/"})});function Pe(n){let t=$("#uploadPrincipal2Image").prop("files")[0];if(t){let i=new FileReader;i.onload=function(d){$("#principalImage2Preview").attr("src",D(h)+"/"+n.path).show(),$("#principalImage2Name").val(t.name)},i.readAsDataURL(t),s("registro correcto.")}else s("Por favor, seleccione un archivo para visualizar.")}document.addEventListener("DOMContentLoaded",()=>{H({fileInputId:"uploadVideo",progressBarId:"progressBar",statusElementId:"status",uploadUrl:h+"/producto/fileupload",callback:qe,folder:"/producto/video/"})});function qe(n){$("#videoPreview").attr("src",D(h)+"/"+n.path).show()}function H({fileInputId:n,progressBarId:t,statusElementId:i,uploadUrl:d,folder:a,callback:k}){const y=document.getElementById(n),e=y.name,r=document.getElementById(t),c=document.getElementById(i);y&&r&&c?new de(d,r,c,k,e,a).attachToFileInput(y):console.error("Initialization failed: One or more elements not found.")}const Z=document.getElementById("dni"),Ne=document.getElementById("nombres"),Se=document.getElementById("apellidos");Z.addEventListener("input",async function(){const n=Z.value.trim();if(n.length==8){const i=await ge(n);i!=null?(Ne.value=i.nombres,Se.value=i.apellidoPaterno+" "+i.apellidoMaterno):(s("El DNI no esta registrado en reniec"),$("#nombres").val(""),$("#apellidos").val(""))}});document.getElementById("otro").addEventListener("change",function(){var n=this,t=document.getElementById("desotro");t.disabled=!n.checked,$("#desotro").val("")});
