import"./modulepreload-polyfill-3cfb730f.js";import{_ as i}from"./preload-helper-101896b7.js";import{l as c}from"./viewpartials-ac66bf27.js";import{b as s,g as d}from"./config-64035b4f.js";import{h as p,c as u,l as m}from"./init-bc9bbeea.js";import{s as n}from"./toast-8abe4fe9.js";async function f(a){const e={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(a)};try{return await(await fetch(s+"/api/usuario_save",e)).json()}catch(t){console.error("Error:",t)}}async function v(a){const e={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(a)};try{return await(await fetch(s+"/api/cambiar_contrasenia",e)).json()}catch(t){console.error("Error:",t)}}p();(async function(){let a=[{path:"partials/shared/header.html",container:"app-header"},{path:"partials/shared/menuperfil.html",container:"app-side"}];try{await c(a),i(()=>import("./common-8d3221b9.js"),[]),console.log("Las vistas parciales se han cargado correctamente!"),h()}catch(e){console.error(e)}})();function h(){u(),b(),m(),g(),x()}async function b(){let a=d("session").usuario;console.log(a),$("#txt-dni").val(a.dni),$("#txt-nombres").val(a.nombres),$("#txt-apellidos").val(a.apellidos),$("#txt-correo").val(a.correo),$("#txt-telefonos").val(a.telefonos);let e="";a.rolid==1&&(e="ADMINISTRADOR"),a.rolid==2&&(e="DOCENTE"),a.rolid==3&&(e="ESTUDIANTE"),$("#txt-rol").val(e);let t=a.programas.map(r=>r.denominacion).join(", ");$("#txt-programa").val(t)}async function g(){$("#btnguardardatosperfil").on("click",async function(a){a.preventDefault(),$("#btnguardardatosperfil").prop("disabled",!0).text("Guardando...");let e=$("#txt-dni").val(),t=$("#txt-nombres").val(),r=$("#txt-apellidos").val(),o=$("#txt-correo").val(),l=$("#txt-telefonos").val();(await f({dni:e,nombres:t,apellidos:r,correo:o,telefonos:l})).id?n("Se guardo los datos correctamente"):n("Ocurrio un error."),$("#btnguardardatosperfil").prop("disabled",!1).text("Guardar")})}async function x(){$("#btncambiarClave").on("click",async function(a){a.preventDefault(),$("#btncambiarClave").prop("disabled",!0).text("Guardando...");let e=$("#txt-dni").val(),t=$("#txt_clave_ant").val(),r=$("#txt_clave_nueva").val(),o=await v({dni:e,clave_ant:t,clave_nueva:r});o.ischanged!=null?n(o.msj):(n("Se guardo los datos correctamente"),window.location.href="index.html"),$("#btncambiarClave").prop("disabled",!1).text("Guardar")})}
