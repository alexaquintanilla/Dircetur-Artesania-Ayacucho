import"./modulepreload-polyfill-3cfb730f.js";import{_}from"./preload-helper-101896b7.js";import{l as I}from"./viewpartials-ac66bf27.js";import{A as T}from"./alert-3bd678b2.js";import{b,g as C}from"./config-64035b4f.js";import{h as B,l as w}from"./init-bc9bbeea.js";import{s as y}from"./toast-8abe4fe9.js";async function v(e){try{const t=new URLSearchParams(e);return await(await fetch(b+`/productoartesano?${t}`)).json()}catch(t){console.error("Error al buscar las producto:",t)}}async function M(e){const t={method:"DELETE",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e)};try{return await(await fetch(b+"/producto",t)).json()}catch(a){console.error("Error:",a)}}const k=new T;B();(async function(){let e=[{path:"partials/shared/header.html",container:"app-header"},{path:"partials/shared/menu.html",container:"app-side"}];try{await I(e),_(()=>import("./common-8d3221b9.js"),[]),console.log("Las vistas parciales se han cargado correctamente!"),S()}catch(t){console.error(t)}})();function S(){setTimeout(function(){w()},500),D()}let o=1,u=10;var h=0;let x=C("session").usuarios;h=x.datos[0].id;document.getElementById("filtrar-producto").addEventListener("click",async function(e){L()});async function L(){const e=document.getElementById("nombre-producto").value,t=document.getElementById("precios-id").value,a=document.getElementById("cantidades-id").value,i=await v({nombres_es:e,precio:t,cantidad:a,id:h});m(i,u,o),f(i,u)}$(document).on("click",".btn_Eliminar",async function(e){k.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas eliminar el producto?","Cancelar","Continuar",async()=>{try{e.preventDefault();let t=$(this).data("id");await M({id:t})?(y("Se elimino los datos correctamente"),L(),await buscarUser()):y("Ocurrio un error.")}catch(t){console.error("Error al eliminar la foto de perfil:",t)}})});async function D(){const e=document.getElementById("nombre-producto").value,t=document.getElementById("precios-id").value,a=document.getElementById("cantidades-id").value,i=await v({nombres_es:e,precio:t,cantidad:a,id:h});m(i,u,o),f(i,u)}async function m(e,t,a){const n=(a-1)*t,i=Math.min(n+t,e.length),p=e.slice(n,i);let s=document.getElementById("tablaproducto");s.innerHTML="";let d='<tr><th>N°</th><th>Imagen</th><th>Producto</th> <th>Precio S/.</th><th>Stock</th> <th  style="text-align: center;">Acciones</th></tr>';s.innerHTML+=d;let r=1;for(let l of p){let c="<tr>";c+=`<td>${r}</td>`,c+=`<td style="text-align: center;"><img src="${l.imagen_principal}" alt="Imagen" style="width: 150px;ali height: auto;"></td>`,c+=`<td>${l.nombres_es}</td>`,c+=`<td>${l.precio}</td>`,c+=`<td>${l.cantidad}</td>`,c+=`<td style="text-align: center;"><a href="/productoartesano-detalle.html?id=${l.id}" data-toggle="tooltip" title="Editar" data-id="${l.id}" class="btn btn-info btn-sm" > <i class="icon icon-edit2"></i></a> `,c+=`<a href="javascript:void(0);"  data-toggle="tooltip"  title="Eliminar" data-id="${l.id}" class="btn btn_Eliminar btn-primary btn-sm">  <i class="icon icon-bin"></i></a>`,c+="</td>",c+="</tr>",s.innerHTML+=c,r++}$('[data-toggle="tooltip"]').tooltip(),A(n+1,i,e.length)}function f(e,t){const a=document.querySelector(".pagination");a.innerHTML="";const n=Math.ceil(e.length/t),i=document.createElement("li");i.classList.add("paginate_button","page-item","previous"),i.innerHTML='<a href="#" class="page-link">Anterior</a>',i.addEventListener("click",function(r){r.preventDefault(),o>1&&(o--,m(e,t,o),f(e,t))}),a.appendChild(i);const p=Math.max(1,o-2),s=Math.min(n,o+2);p>1&&(a.appendChild(g(1)),p>2&&a.appendChild(E()));for(let r=p;r<=s;r++)a.appendChild(g(r));s<n&&(s<n-1&&a.appendChild(E()),a.appendChild(g(n)));const d=document.createElement("li");d.classList.add("paginate_button","page-item","next"),d.innerHTML='<a href="#" class="page-link">Siguiente</a>',d.addEventListener("click",function(r){r.preventDefault(),o<n&&(o++,m(e,t,o),f(e,t))}),a.appendChild(d),P()}function g(e){const t=document.createElement("li");return t.classList.add("paginate_button","page-item"),t.innerHTML=`<a href="#" class="page-link">${e}</a>`,e===o&&t.classList.add("active"),t.addEventListener("click",function(a){a.preventDefault(),o=e,m(data,u,o),f(data,u)}),t}function E(){const e=document.createElement("li");return e.classList.add("paginate_button","page-item","disabled"),e.innerHTML='<a href="#" class="page-link">…</a>',e}function P(){const e=document.querySelectorAll(".pagination .page-item");e.forEach(t=>t.classList.remove("active")),e.forEach(t=>{t.querySelector(".page-link")&&parseInt(t.querySelector(".page-link").innerText)===o&&t.classList.add("active")})}function A(e,t,a){const n=document.getElementById("basicExample_info");n.textContent=`Mostrando del ${e} a ${t} de ${a} resultados`}
