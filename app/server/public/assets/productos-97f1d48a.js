import"./modulepreload-polyfill-3cfb730f.js";import{l as _,_ as T}from"./viewpartials-7a86f681.js";import{A as B}from"./alert-3bd678b2.js";import{g as I,b as E}from"./config-ef5f6dbc.js";import{h as C,l as M}from"./init-52a8aa54.js";import{s as g}from"./toast-8abe4fe9.js";/* empty css              */async function y(t){try{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+I("accessToken")}},n=new URLSearchParams(t);return await(await fetch(E+`/productos?${n}`,e)).json()}catch(e){console.error("Error al buscar las producto:",e)}}async function w(t){const e={method:"DELETE",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t)};try{return await(await fetch(E+"/producto",e)).json()}catch(n){console.error("Error:",n)}}const D=new B;C();(async function(){let t=[{path:"partials/shared/header.html",container:"app-header"},{path:"partials/shared/menu.html",container:"app-side"}];try{await _(t),T(()=>import("./common-8d3221b9.js"),[]),console.log("Las vistas parciales se han cargado correctamente!"),k()}catch(e){console.error(e)}})();function k(){setTimeout(function(){M()},500),L()}let o=1,u=10;async function v(){const t=document.getElementById("nombre-producto").value,e=document.getElementById("nombre-artesano").value,n=document.getElementById("precios-id").value,a=document.getElementById("cantidades-id").value,i=await y({nombres_es:t,nombre_completo:e,precio:n,cantidad:a});m(i,u,o),h(i,u)}document.getElementById("filtrar-producto").addEventListener("click",async function(t){t.preventDefault(),v()});$(document).on("click",".btn_Eliminar",async function(t){D.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas eliminar el producto?","Cancelar","Continuar",async()=>{try{t.preventDefault();let e=$(this).data("id");await w({id:e})?(g("Se eliminó los datos correctamente"),v()):g("Ocurrió un error.")}catch(e){console.error("Error al eliminar el producto:",e)}})});async function L(){const t=document.getElementById("nombre-producto").value,e=document.getElementById("nombre-artesano").value,n=document.getElementById("precios-id").value,a=document.getElementById("cantidades-id").value,i=await y({nombres_es:t,nombre_completo:e,precio:n,cantidad:a});m(i,u,o),h(i,u)}async function m(t,e,n){const a=(n-1)*e,r=Math.min(a+e,t.length),i=t.slice(a,r);let d=document.getElementById("tablaproducto");d.innerHTML="";let p='<tr><th>N°</th><th>Imagen</th><th>Producto</th><th>Nombre Artesano</th><th>Precio S/.</th><th>Stock</th><th style="text-align: center;">Acciones</th></tr>';d.innerHTML+=p;let c=a+1;for(let l of i){let s="<tr>";s+=`<td>${c}</td>`,s+=`<td style="text-align: center;"><img src="${l.imagen_principal}" alt="Imagen" style="width: 150px; height: auto;"></td>`,s+=`<td>${l.nombres_es}</td>`,s+=`<td>${l.nombre_completo}</td>`,s+=`<td>${l.precio}</td>`,s+=`<td>${l.cantidad}</td>`,s+=`<td style="text-align: center;"><a href="/productos-detalle.html?id=${l.id}" data-toggle="tooltip" title="Editar" data-id="${l.id}" class="btn btn-info btn-sm"><i class="icon icon-edit2"></i></a> `,s+=`<a href="javascript:void(0);" data-toggle="tooltip" title="Eliminar" data-id="${l.id}" class="btn btn_Eliminar btn-primary btn-sm"><i class="icon icon-bin"></i></a></td>`,s+="</tr>",d.innerHTML+=s,c++}$('[data-toggle="tooltip"]').tooltip(),A(a+1,r,t.length)}function h(t,e){const n=document.querySelector(".pagination");n.innerHTML="";const a=Math.ceil(t.length/e),r=document.createElement("li");r.classList.add("paginate_button","page-item","previous"),r.innerHTML='<a href="#" class="page-link">Anterior</a>',r.addEventListener("click",function(c){c.preventDefault(),o>1&&(o--,m(t,e,o),h(t,e))}),n.appendChild(r);const i=Math.max(1,o-2),d=Math.min(a,o+2);i>1&&(n.appendChild(f(1,t)),i>2&&n.appendChild(b()));for(let c=i;c<=d;c++)n.appendChild(f(c,t));d<a&&(d<a-1&&n.appendChild(b()),n.appendChild(f(a,t)));const p=document.createElement("li");p.classList.add("paginate_button","page-item","next"),p.innerHTML='<a href="#" class="page-link">Siguiente</a>',p.addEventListener("click",function(c){c.preventDefault(),o<a&&(o++,m(t,e,o),h(t,e))}),n.appendChild(p),x()}function f(t,e){const n=document.createElement("li");return n.classList.add("paginate_button","page-item"),n.innerHTML=`<a href="#" class="page-link">${t}</a>`,t===o&&n.classList.add("active"),n.addEventListener("click",function(a){a.preventDefault(),o=t,m(e,u,o),h(e,u)}),n}function b(){const t=document.createElement("li");return t.classList.add("paginate_button","page-item","disabled"),t.innerHTML='<a href="#" class="page-link">…</a>',t}function x(){const t=document.querySelectorAll(".pagination .page-item");t.forEach(e=>e.classList.remove("active")),t.forEach(e=>{parseInt(e.innerText)===o&&e.classList.add("active")})}function A(t,e,n){const a=document.getElementById("basicExample_info");a.textContent=`Mostrando del ${t} a ${e} de ${n} resultados`}L();
