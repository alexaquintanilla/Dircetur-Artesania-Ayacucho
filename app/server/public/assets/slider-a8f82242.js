import"./modulepreload-polyfill-3cfb730f.js";import{_}from"./preload-helper-101896b7.js";import{b as d,a as w}from"./config-64035b4f.js";import{F as N}from"./uploadVictor-fc196769.js";import{A as T}from"./alert-3bd678b2.js";import{l as x}from"./viewpartials-ac66bf27.js";import{h as U,l as A}from"./init-bc9bbeea.js";async function D(e){try{const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return await(await fetch(d+"/slider",t)).json()}catch(t){console.error("Error:",t)}}async function j(e,t){try{const a={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return await(await fetch(d+`/slider/${e}`,a)).json()}catch(a){console.error("Error:",a)}}async function O(e){try{const t={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})};return await(await fetch(d+"/slider",t)).json()}catch(t){console.error("Error:",t)}}async function z(e){try{return await(await fetch(d+`/slider/${e}`,{method:"GET"})).json()}catch(t){console.error("Error:",t)}}async function M(e,t){try{return await(await fetch(`${d}/sliders?page=${e}&limit=${t}`,{method:"GET"})).json()}catch(a){console.error("Error:",a)}}const F=new T;U();(async function(){let e=[{path:"partials/shared/header.html",container:"app-header"},{path:"partials/shared/menu.html",container:"app-side"}];try{await x(e),_(()=>import("./common-8d3221b9.js"),[]),console.log("Las vistas parciales se han cargado correctamente!"),G()}catch(t){console.error(t)}})();function G(){setTimeout(function(){A()},500)}let L=null;const S=10;let l=1,P=0;document.addEventListener("DOMContentLoaded",()=>{I(),B({fileInputId:"myfile",progressBarId:"progressBar",statusElementId:"status",uploadUrl:d+"/fileupload4",folder:"/slider/img/",callback:R}),B({fileInputId:"myfile-editar",progressBarId:"progressBar-editar",statusElementId:"status-editar",folder:"/slider/img/",uploadUrl:d+"/fileupload4",callback:J})});function B({fileInputId:e,progressBarId:t,statusElementId:a,uploadUrl:r,folder:s,callback:n}){const c=document.getElementById(e),g=c.name,h=document.getElementById(t),u=document.getElementById(a);c&&h&&u?new N(r,h,u,n,g,s).attachToFileInput(c):console.error("Initialization failed: One or more elements not found.")}function R(e){let t=$("#myfile").prop("files")[0];if(t){let a=new FileReader;a.onload=function(r){$("#principalImagePreview").attr("src",w(d)+"/"+e.ruta).show(),$("#principalImageName").val(t.name)},a.readAsDataURL(t),L=w(d)+"/"+e.ruta}else alert("Por favor, seleccione un archivo para visualizar.")}function J(e){let t=$("#myfile-editar").prop("files")[0];if(t){let a=new FileReader;a.onload=function(r){$("#SliderImagePreviewEdit").attr("src",w(d)+"/"+e.ruta).show()},a.readAsDataURL(t),L=w(d)+"/"+e.ruta,alert("Actualización de la imagen correctamente")}else alert("Por favor, seleccione un archivo para visualizar.")}document.getElementById("myfile").addEventListener("change",function(){var e=this.files[0],t=e.type,a=["image/png","image/jpeg"];a.includes(t)||(alert("Solo se permiten archivos PNG o JPG"),this.value="")});document.getElementById("myfile-editar").addEventListener("change",function(){var e=this.files[0],t=e.type,a=["image/png","image/jpeg"];a.includes(t)||(alert("Solo se permiten archivos PNG o JPG"),this.value="")});async function I(){try{let e=await M(l,S);V(e.sliders),P=Math.ceil(e.totalItems/S),q(P,e.totalItems)}catch(e){console.error("Error:",e)}}function V(e){$("#listaSlider").empty();let t="";for(let r of e){let s=r.imagen.replace(/"/g,"");t+=`<tr>
            <td class="border-b border-gray-200 bg-white text-sm">
              <img src="${s}" alt="Imagen del slider" width="100">
            </td>
            <td class="border-b border-gray-200 bg-white text-sm">
              ${r.descripcion}
            </td>
            <td class="border-b border-gray-200 bg-white text-sm">
            <button type="button" class="btn btn-info btn-sm btn-editarS" data-toggle="modal" data-target="#modalSliderE" data-id="${r.id}"><i class="icon icon-edit2"></i></button>
            <button type="button" class="btn btn-primary btn-sm btn-eliminarS" data-id="${r.id}"><i class="icon icon-bin"></i></button>
            </td>
          </tr>`}let a=`
    <table class="table m-0" id="tablaCliente"">
        <thead class="thead-default">
          <tr>
            <th>
              Imagen
            </th>
            <th>
              Frase
            </th>
            <th>
              Acciones
            </th>
          </tr>
        </thead>
        <tbody>`+t+`
          
        </tbody>
      </table>`;$("#listaSlider").append(a)}document.getElementById("formSliderC").addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("frase").value;var a=document.getElementById("principalImagePreview"),r=a.src;const s={descripcion:t,imagen:r},n=document.getElementById("formSliderC");try{if(!n.checkValidity()){n.reportValidity();return}await D(s)?($("#frase").val(""),$("#imgSlider").val(""),$("#modalSliderC").modal("hide"),I(),H()):console.error("Error al guardar el slider")}catch(c){console.error("Error:",c)}});$(document).on("click",".btn-eliminarS",async function(e){const t=$(this).data("id");F.createAlertDialog("confirm","Confirmar Alerta","¿Estás seguro de que deseas eliminar el slider?","Cancelar","Continuar",async()=>{try{await O(t)?(console.log("Slider eliminado exitosamente"),await I()):console.error("Error al eliminar el slider:")}catch(a){console.error("Error:",a)}})});$(document).on("click",".btn-editarS",async function(e){const t=$(this).data("id");try{const a=await z(t);let r=a.imagen.replace(/"/g,"");$("#SliderImagePreviewEdit").attr("src",r).show(),$("#formSliderE").attr("data-id",a.id),$("#fraseE").val(a.descripcion),$("#myfile-editar").val(a.imagen)}catch(a){console.error("Error:",a)}});$(document).on("submit","#formSliderE",async function(e){e.preventDefault();const t=$(this).data("id"),a=document.getElementById("fraseE").value,r=document.getElementById("myfile-editar"),s={descripcion:a};r.files[0]?s.imagen=L:s.imagen=$("#SliderImagePreviewEdit").attr("src");try{const n=await j(t,s);n?($("#fraseE").val(""),$("#imgSliderE").val(""),console.log("Slider actualizado exitosamente"),$("#modalSliderE").modal("hide"),I()):console.error("Error al actualizar el slider:",n.message)}catch(n){console.error("Error:",n)}});function q(e,t){const a=(l-1)*S+1;let r=l*S;r>t&&(r=t);const s=document.getElementById("paginationInfo");s.innerHTML=`Viendo del ${a} a ${r} de un total de ${t} resultados`;const n=document.getElementById("paginationControls");n.innerHTML="";const c=document.createElement("li");c.className="paginate_button page-item previous",c.id="apiCallbacks_previous",l===1&&c.classList.add("disabled");const g=document.createElement("a");g.className="page-link",g.href="#",g.textContent="Anterior",g.addEventListener("click",()=>y(l-1)),c.appendChild(g),n.appendChild(c);const h=3;if(e<=h)for(let m=1;m<=e;m++){const p=document.createElement("li");p.className="paginate_button page-item",m===l&&p.classList.add("active");const f=document.createElement("a");f.className="page-link",f.href="#",f.textContent=m,f.addEventListener("click",()=>y(m)),p.appendChild(f),n.appendChild(p)}else{const m=document.createElement("li");m.className="paginate_button page-item",l===1&&m.classList.add("active");const p=document.createElement("a");if(p.className="page-link",p.href="#",p.textContent=1,p.addEventListener("click",()=>y(1)),m.appendChild(p),n.appendChild(m),l>Math.floor(h/2)+1){const i=document.createElement("li");i.className="paginate_button page-item disabled",i.id="apiCallbacks_ellipsis";const o=document.createElement("a");o.className="page-link",o.href="#",o.textContent="…",i.appendChild(o),n.appendChild(i)}let f=Math.max(l-Math.floor(h/2),2),k=Math.min(f+h-1,e-1);for(let i=f;i<=k;i++){const o=document.createElement("li");o.className="paginate_button page-item",i===l&&o.classList.add("active");const v=document.createElement("a");v.className="page-link",v.href="#",v.textContent=i,v.addEventListener("click",()=>y(i)),o.appendChild(v),n.appendChild(o)}if(k<e-1){const i=document.createElement("li");i.className="paginate_button page-item disabled",i.id="apiCallbacks_ellipsis";const o=document.createElement("a");o.className="page-link",o.href="#",o.textContent="…",i.appendChild(o),n.appendChild(i)}const C=document.createElement("li");C.className="paginate_button page-item",l===e&&C.classList.add("active");const b=document.createElement("a");b.className="page-link",b.href="#",b.textContent=e,b.addEventListener("click",()=>y(e)),C.appendChild(b),n.appendChild(C)}const u=document.createElement("li");u.className="paginate_button page-item next",u.id="apiCallbacks_next",l===e&&u.classList.add("disabled");const E=document.createElement("a");E.className="page-link",E.href="#",E.textContent="Siguiente",E.addEventListener("click",()=>y(l+1)),u.appendChild(E),n.appendChild(u)}async function y(e){e!==l&&(l=e,await I())}$("#modalSliderC").on("shown.bs.modal",function(){$("#frase").val(""),$("#myfile").val(""),$("#status").html(""),$("#principalImagePreview").attr("src","").css("display","none")});function H(){$("#frase").val(""),$("#myfile").val(""),$("#status").html(""),$("#principalImagePreview").attr("src","").css("display","none")}
